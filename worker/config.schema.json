{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Niles RSS Configuration",
  "description": "RSS 源和兴趣配置",
  "type": "object",
  "required": ["global", "sources"],
  "additionalProperties": false,
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema URI"
    },
    "global": {
      "type": "object",
      "description": "全局兴趣配置",
      "required": ["high_interest", "interest", "uninterested", "exclude", "preferred_language", "timeout"],
      "additionalProperties": false,
      "properties": {
        "high_interest": {
          "type": "string",
          "description": "强烈感兴趣的主题（逗号分隔）"
        },
        "interest": {
          "type": "string",
          "description": "一般感兴趣的主题（逗号分隔）"
        },
        "uninterested": {
          "type": "string",
          "description": "不感兴趣的主题（逗号分隔）"
        },
        "exclude": {
          "type": "string",
          "description": "强烈排除的主题（逗号分隔）"
        },
        "preferred_language": {
          "type": "string",
          "description": "首选语言代码，如 zh, en",
          "default": "zh"
        },
        "timeout": {
          "type": "integer",
          "description": "全局默认的 Claude 执行超时时间（分钟）",
          "minimum": 1
        }
      }
    },
    "sources": {
      "type": "array",
      "description": "RSS 源列表",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["name", "url", "cron"],
        "additionalProperties": false,
        "properties": {
          "name": {
            "type": "string",
            "description": "源名称"
          },
          "title": {
            "type": "string",
            "description": "RSS 标题（可选，默认使用原 RSS 标题）"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "RSS feed URL"
          },
          "cron": {
            "type": "string",
            "pattern": "^(\\*|([0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])|\\*/[0-9]+) (\\*|([0-9]|1[0-9]|2[0-3])) (\\*|([1-9]|1[0-9]|2[0-9]|3[0-1])) (\\*|([1-9]|1[0-2])) (\\*|([0-6]))$",
            "description": "Cron 表达式，例如 '*/30 * * * *' 表示每 30 分钟，'0 0 * * *' 表示每天 0 点"
          },
          "high_interest": {
            "type": "string",
            "description": "源特定的强烈感兴趣主题（逗号分隔）"
          },
          "interest": {
            "type": "string",
            "description": "源特定的一般感兴趣主题（逗号分隔）"
          },
          "uninterested": {
            "type": "string",
            "description": "源特定的不感兴趣主题（逗号分隔）"
          },
          "exclude": {
            "type": "string",
            "description": "源特定的强烈排除主题（逗号分隔）"
          },
          "plugins": {
            "type": "array",
            "description": "启用的插件列表",
            "items": {
              "type": "string",
              "enum": ["fetch_meta", "fetch_content", "hacker_news_comments"]
            },
            "default": []
          },
          "summarize": {
            "type": "boolean",
            "description": "是否深度分析并翻译/总结为 preferred_language",
            "default": false
          },
          "timeout": {
            "type": "integer",
            "description": "Claude 执行超时时间（分钟），覆盖 global.timeout",
            "minimum": 1
          }
        }
      }
    }
  }
}
